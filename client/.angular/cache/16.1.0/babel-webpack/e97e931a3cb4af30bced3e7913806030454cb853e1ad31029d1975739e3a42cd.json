{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction FlightsComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 5)(1, \"div\", 6)(2, \"span\", 7);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction FlightsComponent_li_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"div\", 8)(2, \"div\", 9)(3, \"table\", 1)(4, \"tr\")(5, \"th\")(6, \"h5\", 10);\n    i0.ɵɵtext(7, \"FLIGHT NAME\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"th\")(9, \"h5\", 10);\n    i0.ɵɵtext(10, \"FLIGHT NUMBER\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"th\")(12, \"h5\", 10);\n    i0.ɵɵtext(13, \"DEPARTURE\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(14, \"th\")(15, \"h5\", 10);\n    i0.ɵɵtext(16, \"DESTINATION\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(17, \"tr\")(18, \"td\")(19, \"h5\", 11);\n    i0.ɵɵtext(20);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(21, \"td\")(22, \"p\", 11);\n    i0.ɵɵtext(23);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(24, \"td\")(25, \"p\", 11);\n    i0.ɵɵtext(26);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(27, \"td\")(28, \"p\", 11);\n    i0.ɵɵtext(29);\n    i0.ɵɵelementEnd()()()()()()();\n  }\n  if (rf & 2) {\n    const flight_r2 = ctx.$implicit;\n    i0.ɵɵadvance(20);\n    i0.ɵɵtextInterpolate(flight_r2.airline);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(flight_r2.flightNumber);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(flight_r2.origin);\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(flight_r2.destination);\n  }\n}\nclass FlightsComponent {\n  constructor(http) {\n    this.http = http;\n    this.isLoading = false;\n    this.flights = [];\n    this.flightId = '';\n    this.bookedSeats = [];\n    this.selectedDate = '';\n    this.bookings = [];\n    this.error = \"\";\n    this.isLoading = true;\n    const airline = localStorage.getItem('airline');\n    this.http.get(`http://localhost:5100/flights/airline/${airline}`).subscribe(res => {\n      this.flights = res;\n      this.isLoading = false;\n    });\n  }\n  onCheckRevenue(id) {\n    this.http.get(`http://localhost:5100/bookings`).subscribe(res => {\n      // console.log(res)\n      if (res) {\n        const data = res.filter(each => {\n          const eachDate = new Date(each.journeyDate);\n          console.log(eachDate);\n          const selectedDate = new Date(this.selectedDate);\n          console.log(selectedDate);\n          return eachDate.getDate() === selectedDate.getDate();\n        });\n        // console.log(data)\n      }\n      // if (res) {\n      //   const data = res.reservedSeats.filter((each: { date: string }) => {\n      //     const eachDate = new Date(each.date);\n      //     const selectedDate = new Date(this.selectedDate);\n      //     return eachDate.getDate() === selectedDate.getDate();\n      //   });\n      //   this.bookedSeats = data.map((item: { seat: any, date: any }) => item.seat);\n      // } else {\n      //   this.bookedSeats = [];\n      // }\n    });\n  }\n\n  checkSelectedDate() {\n    const today = new Date();\n    const selected = new Date(this.selectedDate);\n    if (selected > today) {\n      this.error = 'Please select a previous date.';\n      this.selectedDate = '';\n    } else {\n      this.error = \"\";\n    }\n  }\n}\nFlightsComponent.ɵfac = function FlightsComponent_Factory(t) {\n  return new (t || FlightsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nFlightsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FlightsComponent,\n  selectors: [[\"app-flights\"]],\n  decls: 8,\n  vars: 2,\n  consts: [[1, \"flights-container\", \"container\", \"pt-4\"], [\"align\", \"center\"], [\"id\", \"#ic\"], [\"class\", \"text-center\", \"style\", \"margin-top: 150px\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", 2, \"margin-top\", \"150px\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"sr-only\"], [1, \"card\", \"mb-4\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\", \"grid-item\"]],\n  template: function FlightsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ul\", 0)(1, \"h1\", 1);\n      i0.ɵɵtext(2, \"Flights\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(3, \"section\", 2)(4, \"p\");\n      i0.ɵɵtext(5, \"THESE ARE OUR WONDERFUL FLIGHT SERVICES\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵtemplate(6, FlightsComponent_div_6_Template, 4, 0, \"div\", 3);\n      i0.ɵɵtemplate(7, FlightsComponent_li_7_Template, 30, 4, \"li\", 4);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.flights);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf],\n  styles: [\".flights-container[_ngcontent-%COMP%] {\\n  list-style-type: none;\\n  padding: 40px;\\n  height: 90vh;\\n  overflow: auto;\\n}\\n\\n.form-control[_ngcontent-%COMP%] {\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\n.btn[_ngcontent-%COMP%] {\\n  width: -moz-fit-content;\\n  width: fit-content;\\n}\\n\\n.flights-container[_ngcontent-%COMP%] {\\n  list-style-type: none;\\n}\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\n  padding-right: 40px;\\n}\\n.grid-item[_ngcontent-%COMP%] {\\n  background-color: rgba(255, 255, 255, 0.8);\\n  border: 2px solid rgba(0, 0, 0, 0.8);\\n  padding: 20px;\\n  font-size: 20px;\\n  text-align: center;\\n  color: crimson;\\n  border-color: black;\\n}\\n\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvb3duZXJtb2R1bGVzL293bmVyL2NvbXBvbmVudHMvZmxpZ2h0cy9mbGlnaHRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDRSxxQkFBcUI7RUFDckIsYUFBYTtFQUNiLFlBQVk7RUFDWixjQUFjO0FBQ2hCOztBQUVBO0VBQ0UsdUJBQWtCO0VBQWxCLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLHVCQUFrQjtFQUFsQixrQkFBa0I7QUFDcEI7O0FBRUE7RUFDRSxxQkFBcUI7QUFDdkI7QUFDQTs7RUFFRSxtQkFBbUI7QUFDckI7QUFDQTtFQUNFLDBDQUEwQztFQUMxQyxvQ0FBb0M7RUFDcEMsYUFBYTtFQUNiLGVBQWU7RUFDZixrQkFBa0I7RUFDbEIsY0FBYztFQUNkLG1CQUFtQjtBQUNyQiIsInNvdXJjZXNDb250ZW50IjpbIi5mbGlnaHRzLWNvbnRhaW5lciB7XG4gIGxpc3Qtc3R5bGUtdHlwZTogbm9uZTtcbiAgcGFkZGluZzogNDBweDtcbiAgaGVpZ2h0OiA5MHZoO1xuICBvdmVyZmxvdzogYXV0bztcbn1cblxuLmZvcm0tY29udHJvbCB7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuLmJ0biB7XG4gIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuLmZsaWdodHMtY29udGFpbmVyIHtcbiAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xufVxudGgsXG50ZCB7XG4gIHBhZGRpbmctcmlnaHQ6IDQwcHg7XG59XG4uZ3JpZC1pdGVtIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyNTUsIDI1NSwgMjU1LCAwLjgpO1xuICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuOCk7XG4gIHBhZGRpbmc6IDIwcHg7XG4gIGZvbnQtc2l6ZTogMjBweDtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICBjb2xvcjogY3JpbXNvbjtcbiAgYm9yZGVyLWNvbG9yOiBibGFjaztcbn1cbiJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});\nexport { FlightsComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","flight_r2","airline","flightNumber","origin","destination","FlightsComponent","constructor","http","isLoading","flights","flightId","bookedSeats","selectedDate","bookings","error","localStorage","getItem","get","subscribe","res","onCheckRevenue","id","data","filter","each","eachDate","Date","journeyDate","console","log","getDate","checkSelectedDate","today","selected","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","FlightsComponent_Template","rf","ctx","ɵɵtemplate","FlightsComponent_div_6_Template","FlightsComponent_li_7_Template","ɵɵproperty"],"sources":["C:\\Users\\SUREKHA\\OneDrive\\Desktop\\flight-booking-app-project\\flight-booking-app-project\\client\\src\\app\\ownermodules\\owner\\components\\flights\\flights.component.ts","C:\\Users\\SUREKHA\\OneDrive\\Desktop\\flight-booking-app-project\\flight-booking-app-project\\client\\src\\app\\ownermodules\\owner\\components\\flights\\flights.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-flights',\n  templateUrl: './flights.component.html',\n  styleUrls: ['./flights.component.css']\n})\nexport class FlightsComponent {\n  isLoading = false\n  flights: any[] = [];\n  flightId: string = '';\n  bookedSeats: any[] = [];\n  selectedDate: string = '';\n  \n  constructor(private http:HttpClient){\n    this.isLoading = true\n    const airline = localStorage.getItem('airline')\n    this.http.get<any[]>(`http://localhost:5100/flights/airline/${airline}`).subscribe((res) => {\n      this.flights = res\n      this.isLoading = false\n    })\n  }\n\n  bookings: any[] = []\n\n  onCheckRevenue(id:string){\n    this.http.get<any[]>(`http://localhost:5100/bookings`).subscribe((res: any) => {\n      // console.log(res)\n\n      if(res){\n        const data = res.filter((each: {journeyDate:string}) => {\n          const eachDate = new Date(each.journeyDate)\n          console.log(eachDate)\n          \n          const selectedDate = new Date(this.selectedDate);\n          console.log(selectedDate)\n          return eachDate.getDate() === selectedDate.getDate();\n        });\n        // console.log(data)\n      }\n        // if (res) {\n        //   const data = res.reservedSeats.filter((each: { date: string }) => {\n        //     const eachDate = new Date(each.date);\n        //     const selectedDate = new Date(this.selectedDate);\n        //     return eachDate.getDate() === selectedDate.getDate();\n        //   });\n        //   this.bookedSeats = data.map((item: { seat: any, date: any }) => item.seat);\n        // } else {\n        //   this.bookedSeats = [];\n        // }\n      })\n  }\n\n  error: string = \"\";\n\n  checkSelectedDate() {\n    const today = new Date();\n    const selected = new Date(this.selectedDate);\n    if (selected > today) {\n      this.error = 'Please select a previous date.';\n      this.selectedDate = '';\n    } else {\n      this.error = \"\";\n    }\n  }\n}\n","<ul class=\"flights-container container pt-4\">\n  <h1 align=\"center\">Flights</h1>\n  <section id=\"#ic\"><p>THESE ARE OUR WONDERFUL FLIGHT SERVICES</p></section>\n  <div class=\"text-center\" *ngIf=\"isLoading\" style=\"margin-top: 150px\">\n    <div class=\"spinner-border\" role=\"status\">\n      <span class=\"sr-only\">Loading...</span>\n    </div>\n  </div>\n  <li *ngFor=\"let flight of flights\">\n    <div class=\"card mb-4\">\n      <div class=\"card-body\">\n        <table align=\"center\">\n          <tr>\n            <th><h5 class=\"card-title\">FLIGHT NAME</h5></th>\n            <th><h5 class=\"card-title\">FLIGHT NUMBER</h5></th>\n            <th><h5 class=\"card-title\">DEPARTURE</h5></th>\n            <th><h5 class=\"card-title\">DESTINATION</h5></th>\n          </tr>\n          <tr>\n            <td>\n              <h5 class=\"card-text grid-item\">{{ flight.airline }}</h5>\n            </td>\n            <td>\n              <p class=\"card-text grid-item\">{{ flight.flightNumber }}</p>\n            </td>\n            <td>\n              <p class=\"card-text grid-item\">{{ flight.origin }}</p>\n            </td>\n            <td>\n              <p class=\"card-text grid-item\">{{ flight.destination }}</p>\n            </td>\n          </tr>\n        </table>\n      </div>\n    </div>\n  </li>\n</ul>\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}