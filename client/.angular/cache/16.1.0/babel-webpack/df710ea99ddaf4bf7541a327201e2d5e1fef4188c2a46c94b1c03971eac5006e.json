{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/common\";\nfunction FlightsComponent_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3)(1, \"div\", 4)(2, \"span\", 5);\n    i0.ɵɵtext(3, \"Loading...\");\n    i0.ɵɵelementEnd()()();\n  }\n}\nfunction FlightsComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"div\", 6)(2, \"div\", 7)(3, \"h5\", 8);\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"p\", 9);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"p\", 9);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\", 9);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const flight_r2 = ctx.$implicit;\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(flight_r2.airline);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Flight number: \", flight_r2.flightNumber, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Departure: \", flight_r2.origin, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Destination: \", flight_r2.destination, \"\");\n  }\n}\nclass FlightsComponent {\n  constructor(http) {\n    this.http = http;\n    this.isLoading = false;\n    this.flights = [];\n    this.flightId = '';\n    this.bookedSeats = [];\n    this.selectedDate = '';\n    this.bookings = [];\n    this.error = \"\";\n    this.isLoading = true;\n    const airline = localStorage.getItem('airline');\n    this.http.get(`http://localhost:5100/flights/airline/${airline}`).subscribe(res => {\n      this.flights = res;\n      this.isLoading = false;\n    });\n  }\n  onCheckRevenue(id) {\n    this.http.get(`http://localhost:5100/bookings`).subscribe(res => {\n      // console.log(res)\n      if (res) {\n        const data = res.filter(each => {\n          const eachDate = new Date(each.journeyDate);\n          console.log(eachDate);\n          const selectedDate = new Date(this.selectedDate);\n          console.log(selectedDate);\n          return eachDate.getDate() === selectedDate.getDate();\n        });\n        // console.log(data)\n      }\n      // if (res) {\n      //   const data = res.reservedSeats.filter((each: { date: string }) => {\n      //     const eachDate = new Date(each.date);\n      //     const selectedDate = new Date(this.selectedDate);\n      //     return eachDate.getDate() === selectedDate.getDate();\n      //   });\n      //   this.bookedSeats = data.map((item: { seat: any, date: any }) => item.seat);\n      // } else {\n      //   this.bookedSeats = [];\n      // }\n    });\n  }\n\n  checkSelectedDate() {\n    const today = new Date();\n    const selected = new Date(this.selectedDate);\n    if (selected > today) {\n      this.error = 'Please select a previous date.';\n      this.selectedDate = '';\n    } else {\n      this.error = \"\";\n    }\n  }\n}\nFlightsComponent.ɵfac = function FlightsComponent_Factory(t) {\n  return new (t || FlightsComponent)(i0.ɵɵdirectiveInject(i1.HttpClient));\n};\nFlightsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: FlightsComponent,\n  selectors: [[\"app-flights\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[1, \"flights-container\", \"container\"], [\"class\", \"text-center\", \"style\", \"margin-top: 150px;\", 4, \"ngIf\"], [4, \"ngFor\", \"ngForOf\"], [1, \"text-center\", 2, \"margin-top\", \"150px\"], [\"role\", \"status\", 1, \"spinner-border\"], [1, \"sr-only\"], [1, \"card\", \"mb-4\"], [1, \"card-body\"], [1, \"card-title\"], [1, \"card-text\"]],\n  template: function FlightsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ul\", 0)(1, \"h1\");\n      i0.ɵɵtext(2, \"Flights\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(3, FlightsComponent_div_3_Template, 4, 0, \"div\", 1);\n      i0.ɵɵtemplate(4, FlightsComponent_li_4_Template, 11, 4, \"li\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", ctx.isLoading);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.flights);\n    }\n  },\n  dependencies: [i2.NgForOf, i2.NgIf],\n  styles: [\".flights-container[_ngcontent-%COMP%]{\\n    list-style-type: none;\\n    padding: 40px;\\n    height: 90vh;\\n    overflow: auto;\\n}\\n\\n.form-control[_ngcontent-%COMP%]{\\n    width: -moz-fit-content;\\n    width: fit-content;\\n}\\n\\n.btn[_ngcontent-%COMP%]{\\n    width: -moz-fit-content;\\n    width: fit-content;\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvb3duZXJtb2R1bGVzL293bmVyL2NvbXBvbmVudHMvZmxpZ2h0cy9mbGlnaHRzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7SUFDSSxxQkFBcUI7SUFDckIsYUFBYTtJQUNiLFlBQVk7SUFDWixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksdUJBQWtCO0lBQWxCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLHVCQUFrQjtJQUFsQixrQkFBa0I7QUFDdEIiLCJzb3VyY2VzQ29udGVudCI6WyIuZmxpZ2h0cy1jb250YWluZXJ7XG4gICAgbGlzdC1zdHlsZS10eXBlOiBub25lO1xuICAgIHBhZGRpbmc6IDQwcHg7XG4gICAgaGVpZ2h0OiA5MHZoO1xuICAgIG92ZXJmbG93OiBhdXRvO1xufVxuXG4uZm9ybS1jb250cm9se1xuICAgIHdpZHRoOiBmaXQtY29udGVudDtcbn1cblxuLmJ0bntcbiAgICB3aWR0aDogZml0LWNvbnRlbnQ7XG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});\nexport { FlightsComponent };","map":{"version":3,"names":["i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate","flight_r2","airline","ɵɵtextInterpolate1","flightNumber","origin","destination","FlightsComponent","constructor","http","isLoading","flights","flightId","bookedSeats","selectedDate","bookings","error","localStorage","getItem","get","subscribe","res","onCheckRevenue","id","data","filter","each","eachDate","Date","journeyDate","console","log","getDate","checkSelectedDate","today","selected","ɵɵdirectiveInject","i1","HttpClient","selectors","decls","vars","consts","template","FlightsComponent_Template","rf","ctx","ɵɵtemplate","FlightsComponent_div_3_Template","FlightsComponent_li_4_Template","ɵɵproperty"],"sources":["C:\\Users\\SUREKHA\\Downloads\\flight-booking-main\\flight-booking-main\\client\\src\\app\\ownermodules\\owner\\components\\flights\\flights.component.ts","C:\\Users\\SUREKHA\\Downloads\\flight-booking-main\\flight-booking-main\\client\\src\\app\\ownermodules\\owner\\components\\flights\\flights.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-flights',\n  templateUrl: './flights.component.html',\n  styleUrls: ['./flights.component.css']\n})\nexport class FlightsComponent {\n  isLoading = false\n  flights: any[] = [];\n  flightId: string = '';\n  bookedSeats: any[] = [];\n  selectedDate: string = '';\n  \n  constructor(private http:HttpClient){\n    this.isLoading = true\n    const airline = localStorage.getItem('airline')\n    this.http.get<any[]>(`http://localhost:5100/flights/airline/${airline}`).subscribe((res) => {\n      this.flights = res\n      this.isLoading = false\n    })\n  }\n\n  bookings: any[] = []\n\n  onCheckRevenue(id:string){\n    this.http.get<any[]>(`http://localhost:5100/bookings`).subscribe((res: any) => {\n      // console.log(res)\n\n      if(res){\n        const data = res.filter((each: {journeyDate:string}) => {\n          const eachDate = new Date(each.journeyDate)\n          console.log(eachDate)\n          \n          const selectedDate = new Date(this.selectedDate);\n          console.log(selectedDate)\n          return eachDate.getDate() === selectedDate.getDate();\n        });\n        // console.log(data)\n      }\n        // if (res) {\n        //   const data = res.reservedSeats.filter((each: { date: string }) => {\n        //     const eachDate = new Date(each.date);\n        //     const selectedDate = new Date(this.selectedDate);\n        //     return eachDate.getDate() === selectedDate.getDate();\n        //   });\n        //   this.bookedSeats = data.map((item: { seat: any, date: any }) => item.seat);\n        // } else {\n        //   this.bookedSeats = [];\n        // }\n      })\n  }\n\n  error: string = \"\";\n\n  checkSelectedDate() {\n    const today = new Date();\n    const selected = new Date(this.selectedDate);\n    if (selected > today) {\n      this.error = 'Please select a previous date.';\n      this.selectedDate = '';\n    } else {\n      this.error = \"\";\n    }\n  }\n}\n","<ul class=\"flights-container container\">\n    <h1>Flights</h1>\n    <div class=\"text-center\" *ngIf=\"isLoading\" style=\"margin-top: 150px;\">\n        <div class=\"spinner-border\" role=\"status\">\n            <span class=\"sr-only\">Loading...</span>\n        </div>\n    </div>\n    <li *ngFor=\"let flight of flights\">\n      <div class=\"card mb-4\">\n        <div class=\"card-body\">\n          <h5 class=\"card-title\">{{ flight.airline }}</h5>\n          <p class=\"card-text\">Flight number: {{ flight.flightNumber }}</p>\n          <p class=\"card-text\">Departure: {{ flight.origin }}</p>\n          <p class=\"card-text\">Destination: {{ flight.destination }}</p>\n          <!-- <label for=\"revenue\">Check Revenue: {{0}}</label>\n          <div class=\"d-flex\">\n            <input type=\"date\" id=\"revenue\" class=\"form-control\" [(ngModel)]=\"selectedDate\" (change)=\"checkSelectedDate()\">\n            <button class=\"btn btn-primary\" (click)=\"onCheckRevenue(flight._id)\"> Check</button>\n          </div>\n          <p class=\"error-message text-danger\" style=\"font-weight: bold; font-size: 28px;\" *ngIf=\"error\">{{ error }}</p> -->\n        </div>\n      </div>\n    </li>\n  </ul>\n   "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}